(function(B){B.PaginationCalculator=function(A,D){this.maxentries=A;this.opts=D};B.extend(B.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(A){var K=Math.ceil(this.opts.num_display_entries/2);var L=this.numPages();var I=L-this.opts.num_display_entries;var H=A>K?Math.max(Math.min(A-K,I),0):0;var J=A>K?Math.min(A+K,L):Math.min(this.opts.num_display_entries,L);return{start:H,end:J}}});B.PaginationRenderers={};B.PaginationRenderers.defaultRenderer=function(A,D){this.maxentries=A;this.opts=D;this.pc=new B.PaginationCalculator(A,D)};B.extend(B.PaginationRenderers.defaultRenderer.prototype,{createLink:function(I,A,J){var H,G=this.pc.numPages();I=I<0?0:(I<G?I:G-1);J=B.extend({text:I+1,classes:""},J||{});if(I==A){if(J.text==this.opts.prev_text){H=B("<span></span>")}else{if(J.text==this.opts.next_text){H=B("<span></span>")}else{H=B("<span class='current'>"+J.text+"</span>")}}}else{H=B("<a>"+J.text+"</a>").attr("href","javascript:void(0)")}if(J.classes){H.addClass(J.classes)}H.data("page_id",I);return H},appendRange:function(J,H,A,G){var I;for(I=A;I<G;I++){this.createLink(I,H).appendTo(J)}},getLinks:function(O,P,A){var L,K,M=this.pc.getInterval(O),N=this.pc.numPages(),J=B("<div class='"+A+"'></div>");if(this.opts.prev_text&&(O>0&&this.opts.prev_show_always)){J.append(this.createLink(O-1,O,{text:this.opts.prev_text,classes:"prev"}))}if(M.start>0&&this.opts.num_edge_entries>0){K=Math.min(this.opts.num_edge_entries,M.start);this.appendRange(J,O,0,K);if(this.opts.num_edge_entries<M.start&&this.opts.ellipse_text){jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(J)}}this.appendRange(J,O,M.start,M.end);if(M.end<N&&this.opts.num_edge_entries>0){if(N-this.opts.num_edge_entries>M.end&&this.opts.ellipse_text){jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(J)}L=Math.max(N-this.opts.num_edge_entries,M.end);this.appendRange(J,O,L,N)}if(this.opts.next_text&&(O<N-1&&this.opts.next_show_always)){J.append(this.createLink(O+1,O,{text:this.opts.next_text,classes:"next"}))}B("a",J).click(P);return J}});B.fn.pagination=function(N,J){J=jQuery.extend({"items_per_page":10,"num_display_entries":10,"current_page":0,"num_edge_entries":2,"link_to":"#","newclass":"fc_pages","ellipse_text":"...","prev_show_always":true,"next_show_always":true,"renderer":"defaultRenderer","callback":function(){return false}},J||{});var I=this,K,A,L;function M(D){var E,C=B(D.target).data("page_id");I.data("current_page",C);E=K.getLinks(C,M,J.newclass);I.empty();E.appendTo(I);var F=J.callback(C,I);if(!F){if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}}return F}L=J.current_page;I.data("current_page",L);N=(!N||N<0)?1:N;J.items_per_page=(!J.items_per_page||J.items_per_page<0)?1:J.items_per_page;if(!B.PaginationRenderers[J.renderer]){throw new ReferenceError("Pagination renderer '"+J.renderer+"' was not found in jQuery.PaginationRenderers object.")}K=new B.PaginationRenderers[J.renderer](N,J);I.each(function(){this.selectPage=function(C){M(C)};this.prevPage=function(){var C=I.data("current_page");if(C>0){M(C-1);return true}else{return false}};this.nextPage=function(){var C=I.data("current_page");if(C<numPages()-1){M(C+1);return true}else{return false}}});A=K.getLinks(L,M,J.newclass);I.empty();A.appendTo(I)}})(jQuery);