var grayscale=(function(){var N={colorProps:["color","backgroundColor","borderBottomColor","borderTopColor","borderLeftColor","borderRightColor","backgroundImage"],externalImageHandler:{init:function(B,A){if(B.nodeName.toLowerCase()==="img"){}else{Q(B).backgroundImageSRC=A;B.style.backgroundImage=""}},reset:function(A){if(A.nodeName.toLowerCase()==="img"){}else{A.style.backgroundImage="url("+(Q(A).backgroundImageSRC||"")+")"}}}},K=function(){try{window.console.log.apply(console,arguments)}catch(A){}},O=function(A){return(new RegExp("https?://(?!"+window.location.hostname+")")).test(A)},Q=(function(){var B=[0],A="data"+(+new Date());return function(D){var C=D[A],E=B.length;if(!C){C=D[A]=E;B[C]={}}return B[C]}})(),P=function(E,G,V){var D=document.createElement("canvas"),B=D.getContext("2d"),W=E.naturalHeight||E.offsetHeight||E.height,H=E.naturalWidth||E.offsetWidth||E.width,A;D.height=W;D.width=H;B.drawImage(E,0,0);try{A=B.getImageData(0,0,H,W)}catch(X){}if(G){P.preparing=true;var F=0;(function(){if(!P.preparing){return}if(F===W){B.putImageData(A,0,0,0,0,H,W);V?(Q(V).BGdataURL=D.toDataURL()):(Q(E).dataURL=D.toDataURL())}for(var T=0;T<H;T++){var S=(F*H+T)*4;A.data[S]=A.data[S+1]=A.data[S+2]=J(A.data[S],A.data[S+1],A.data[S+2])}F++;setTimeout(arguments.callee,0)})();return}else{P.preparing=false}for(var F=0;F<W;F++){for(var I=0;I<H;I++){var C=(F*H+I)*4;A.data[C]=A.data[C+1]=A.data[C+2]=J(A.data[C],A.data[C+1],A.data[C+2])}}B.putImageData(A,0,0,0,0,H,W);return D},M=function(D,A){var C=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(D,null)[A]:D.currentStyle[A];if(C&&/^#[A-F0-9]/i.test(C)){var B=C.match(/[A-F0-9]{2}/ig);C="rgb("+parseInt(B[0],16)+","+parseInt(B[1],16)+","+parseInt(B[2],16)+")"}return C},J=function(A,C,B){return parseInt((0.2125*A)+(0.7154*C)+(0.0721*B),10)},L=function(A){var B=Array.prototype.slice.call(A.getElementsByTagName("*"));B.unshift(A);return B};var R=function(I){if(I&&I[0]&&I.length&&I[0].nodeName){var i=Array.prototype.slice.call(I),j=-1,d=i.length;while(++j<d){R.call(this,i[j])}return}I=I||document.documentElement;if(!document.createElement("canvas").getContext){I.style.filter="progid:DXImageTransform.Microsoft.BasicImage(grayscale=1)";I.style.zoom=1;return}var c=L(I),h=-1,f=c.length;while(++h<f){var E=c[h];if(E.nodeName.toLowerCase()==="img"){var H=E.getAttribute("src");if(!H){continue}if(O(H)){N.externalImageHandler.init(E,H)}else{Q(E).realSRC=H;try{E.src=Q(E).dataURL||P(E).toDataURL()}catch(F){N.externalImageHandler.init(E,H)}}}else{for(var b=0,g=N.colorProps.length;b<g;b++){var C=N.colorProps[b],A=M(E,C);if(!A){continue}if(E.style[C]){Q(E)[C]=A}if(A.substring(0,4)==="rgb("){var G=J.apply(null,A.match(/\d+/g));E.style[C]=A="rgb("+G+","+G+","+G+")";continue}if(A.indexOf("url(")>-1){var D=/\(['"]?(.+?)['"]?\)/,e=A.match(D)[1];if(O(e)){N.externalImageHandler.init(E,e);Q(E).externalBG=true;continue}try{var B=Q(E).BGdataURL||(function(){var S=document.createElement("img");S.src=e;return P(S).toDataURL()})();E.style[C]=A.replace(D,function(T,S){return"("+B+")"})}catch(F){N.externalImageHandler.init(E,e)}}}}}};R.reset=function(H){if(H&&H[0]&&H.length&&H[0].nodeName){var E=Array.prototype.slice.call(H),F=-1,A=E.length;while(++F<A){R.reset.call(this,E[F])}return}H=H||document.documentElement;if(!document.createElement("canvas").getContext){H.style.filter="progid:DXImageTransform.Microsoft.BasicImage(grayscale=0)";return}var B=L(H),I=-1,V=B.length;while(++I<V){var G=B[I];if(G.nodeName.toLowerCase()==="img"){var D=G.getAttribute("src");if(O(D)){N.externalImageHandler.reset(G,D)}G.src=Q(G).realSRC||D}else{for(var X=0,W=N.colorProps.length;X<W;X++){if(Q(G).externalBG){N.externalImageHandler.reset(G)}var C=N.colorProps[X];G.style[C]=Q(G)[C]||""}}}};R.prepare=function(E){if(E&&E[0]&&E.length&&E[0].nodeName){var A=Array.prototype.slice.call(E),I=-1,X=A.length;while(++I<X){R.prepare.call(null,A[I])}return}E=E||document.documentElement;if(!document.createElement("canvas").getContext){return}var D=L(E),C=-1,V=D.length;while(++C<V){var G=D[C];if(Q(G).skip){return}if(G.nodeName.toLowerCase()==="img"){if(G.getAttribute("src")&&!O(G.src)){P(G,true)}}else{var H=M(G,"backgroundImage");if(H.indexOf("url(")>-1){var B=/\(['"]?(.+?)['"]?\)/,W=H.match(B)[1];if(!O(W)){var F=document.createElement("img");F.src=W;P(F,true,G)}}}}};return R})();