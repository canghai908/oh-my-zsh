(function(B){B.Calendar=function(A,D){this.$el=B(D);this._init(A)};B.Calendar.defaults={"reg_year":1970,"reg_month":1,"reg_date":1,"target":null,"cate":"","column_style":"default","callback":null,"date_range_begin":{"year":0,"month":0,"day":0},"date_range_end":{"year":0,"month":0,"day":0},"ifrange_same":null};B.Calendar.prototype={_init:function(Af){var A={"data_begin":{"data-full":"","data-year":"","data-month":"","data-day":""},"data_end":{"data-full":"","data-year":"","data-month":"","data-day":""}};Af=B.extend(true,{},B.Calendar.defaults,Af);this.repeat=false;this.differ=false;this.changeOption=function(E,C,D){r=E;u=C;Ak=D;A["data_end"]["data-full"]="";A["data_end"]["data-year"]="";A["data_end"]["data-month"]="";A["data_end"]["data-day"]="";A["data_begin"]["data-full"]="";A["data_begin"]["data-year"]="";A["data_begin"]["data-month"]="";A["data_begin"]["data-day"]="";y();Aq();Aj()};this.rerange=function(D,C){A["data_begin"]["data-full"]=D.year+"/"+D.month+"/"+D.day;A["data_begin"]["data-year"]=D.year;A["data_begin"]["data-month"]=D.month;A["data_begin"]["data-day"]=D.day;A["data_end"]["data-full"]=C.year+"/"+D.month+"/"+D.day;A["data_end"]["data-year"]=C.year;A["data_end"]["data-month"]=C.month;A["data_end"]["data-day"]=C.day;m();Aj();Aq()};var Ar={begin:{},end:{},isSingle:false};if(Af["ifrange_same"]!==null){var Ah=Af["date_range_begin"];var Ab=Af["date_range_end"];if(Af["ifrange_same"]){A["data_begin"]["data-full"]=Ah.year+"/"+Ah.month+"/"+Ah.day;A["data_begin"]["data-year"]=Ah.year;A["data_begin"]["data-month"]=Ah.month;A["data_begin"]["data-day"]=Ah.day;Ar.isSingle=true;Ar.begin.full=A["data_begin"]["data-full"];Ar.begin.year=A["data_begin"]["data-year"];Ar.begin.month=A["data_begin"]["data-month"];Ar.begin.day=A["data_begin"]["data-day"]}else{A["data_begin"]["data-full"]=Ah.year+"/"+Ah.month+"/"+Ah.day;A["data_begin"]["data-year"]=Ah.year;A["data_begin"]["data-month"]=Ah.month;A["data_begin"]["data-day"]=Ah.day;A["data_end"]["data-full"]=Ab.year+"/"+Ab.month+"/"+Ab.day;A["data_end"]["data-year"]=Ab.year;A["data_end"]["data-month"]=Ab.month;A["data_end"]["data-day"]=Ab.day;Ar.isSingle=false;Ar.begin.full=A["data_begin"]["data-full"];Ar.begin.year=A["data_begin"]["data-year"];Ar.begin.month=A["data_begin"]["data-month"];Ar.begin.day=A["data_begin"]["data-day"];Ar.end.full=A["data_end"]["data-full"];Ar.end.year=A["data_end"]["data-year"];Ar.end.month=A["data_end"]["data-month"];Ar.end.day=A["data_end"]["data-day"]}}var Aa=this.$el;var k=Af["target"];var q=Af["column_style"];if(q=="onecolumn"){Aa.addClass("onecolumn");Aa.find(".ds-table1 .calendarWrap2").show()}var Am=Af["cate"];var r=Af["reg_year"];var u=Af["reg_month"];var Ak=Af["reg_date"];var Ag=typeof(now_date)=="undefined"?new Date():now_date;var Ao=Ag.getMonth();var w=Ag.getFullYear();var Ae=Ag.getDate();var An=Ae;var Ad=Ao;var s=w;var Ac=Af["callback"];var Ap,p,v,o,x,Ai;var l=function(){if(Ao==1){Ap=12;p=1;v=2;o=w-1;x=w;Ai=w}else{if(Ao==0){Ap=11;p=12;v=1;o=w-1;x=w-1;Ai=w}else{Ap=Ao-1;p=Ao;v=Ao+1;o=w;x=w;Ai=w}}};var t=function(C,D){if(D==1||D==3||D==5||D==7||D==8||D==10||D==12){return 31}else{if(D==4||D==6||D==9||D==11){return 30}else{if(D==2&&C%4==0){return 29}else{return 28}}}};var z=function(S,C){var U="";var D="";var O="";var E;for(E=(s-1);E<=s;E++){D+='<a  href="#" class="time_select_btn" date-time="'+E+'">'+E+"</a>"}var I='<div date-year="'+S+'" class="select_year">								<div class="s_year_bg"></div>								<div class="s_year_bx">									<span class="ca_arrow"></span>									<div class="s_hd">'+S+' 年</div>								</div>								<div class="po_select_list clearfix">'+D+"</div></div>";for(E=1;E<=12;E++){O+='<a  href="#" class="time_select_btn" date-time="'+E+'">'+E+"</a>"}var Z='<div date-month="'+C+'" class="select_month">								<div class="s_month_bg"></div>								<div class="s_month_bx">									<span class="ca_arrow"></span>									<div class="s_hd">'+C+' 月</div>								</div>								<div class="po_select_list clearfix">'+O+"</div></div>";var P='<div m="'+C+'" y="'+S+'"  class="ds-cal-head cal_select_bar fix" >'+I+Z+"</div>";var W="";var J=S+"/"+C+"/1";var T=new Date(Date.parse(J));var N=T.getDay();var M=t(S,C);E=0;var X=N;var V="";var R=1;var F,G;if(C==1){F=S-1;G=12}else{F=S;G=C-1}var L=t(F,G);while(E<M){var Q="";for(var H=0;H<7;H++){if(E<X){var Y=L-X+1;Q+='<td class="last_date">'+Y+"</td>";X--}else{if(E==M){Q+='<td class="last_date">'+R+"</td>";R++;X--}else{T=E+1;if(((C-1)==Ad&&S==s&&T>An)||(C==u&&S==r&&T<Ak)||(C<u&&S==r)||S<r||S>s||((C-1)>Ad&&S==s)){Q+='<td data-year="'+S+'" data-month="'+C+'" data-day="'+T+'" data-full="'+S+"/"+C+"/"+T+'"  style=""  class="ds-date-thismonth date-grey">'+T+"</td>"}else{if((C-1)==Ad&&S==s&&T==An){if((C==A["data_begin"]["data-month"]&&T==A["data_begin"]["data-day"]&&S==A["data_begin"]["data-year"])||(C==A["data_end"]["data-month"]&&T<=A["data_end"]["data-day"]&&S==A["data_end"]["data-year"])||(C<A["data_end"]["data-month"]&&S==A["data_end"]["data-year"])||(S<A["data_end"]["data-year"])){Q+='<td data-year="'+S+'" data-month="'+C+'" data-day="'+T+'" data-full="'+S+"/"+C+"/"+T+'"  style=""  class="ds-date-thismonth curday ds-date-selected">'+T+"</td>"}else{if(Af["ifrange_same"]===null){Q+='<td data-year="'+S+'" data-month="'+C+'" data-day="'+T+'" data-full="'+S+"/"+C+"/"+T+'"  style=""  class="ds-date-thismonth curday date-now">'+T+"</td>"}else{Q+='<td data-year="'+S+'" data-month="'+C+'" data-day="'+T+'" data-full="'+S+"/"+C+"/"+T+'"  style=""  class="ds-date-thismonth">'+T+"</td>"}}}else{if(A["data_begin"]["data-full"]&&!A["data_end"]["data-full"]&&S==A["data_begin"]["data-year"]&&C==A["data_begin"]["data-month"]&&T==A["data_begin"]["data-day"]){Q+='<td data-year="'+S+'" data-month="'+C+'" data-day="'+T+'" data-full="'+S+"/"+C+"/"+T+'"  style=""  class="ds-date-thismonth ds-date-selected">'+T+"</td>"}else{if(A["data_begin"]["data-full"]&&A["data_end"]["data-full"]&&((A["data_begin"]["data-year"]==A["data_end"]["data-year"]&&A["data_begin"]["data-month"]==A["data_end"]["data-month"]&&S==A["data_begin"]["data-year"]&&C==A["data_begin"]["data-month"]&&A["data_end"]["data-day"]>=T&&T>=A["data_begin"]["data-day"])||(A["data_begin"]["data-year"]==A["data_end"]["data-year"]&&A["data_begin"]["data-month"]<A["data_end"]["data-month"]&&S==A["data_begin"]["data-year"]&&((C==A["data_begin"]["data-month"]&&A["data_begin"]["data-day"]<=T)||(C>A["data_begin"]["data-month"]&&C<A["data_end"]["data-month"])||(C==A["data_end"]["data-month"]&&A["data_end"]["data-day"]>=T)))||(A["data_begin"]["data-year"]<A["data_end"]["data-year"]&&((S==A["data_begin"]["data-year"]&&((C==A["data_begin"]["data-month"]&&A["data_begin"]["data-day"]<=T)||(C>A["data_begin"]["data-month"])))||(S>A["data_begin"]["data-year"]&&S<A["data_end"]["data-year"])||(S==A["data_end"]["data-year"]&&((C==A["data_end"]["data-month"]&&A["data_end"]["data-day"]>=T)||(C<A["data_end"]["data-month"]))))))){Q+='<td data-year="'+S+'" data-month="'+C+'" data-day="'+T+'" data-full="'+S+"/"+C+"/"+T+'"  style=""  class="ds-date-thismonth ds-date-selected">'+T+"</td>"}else{Q+='<td data-year="'+S+'" data-month="'+C+'" data-day="'+T+'" data-full="'+S+"/"+C+"/"+T+'"  style=""  class="ds-date-thismonth">'+T+"</td>"}}}}E++}}}var K="<tr>"+Q+"</tr>";V+=K}W='<table cellspacing="0" cellpadding="0" border="0" class=""><tr class="thead"><td class="date-t-hg">日</td><td>一</td><td>二</td><td>三</td><td>四</td><td>五</td><td class="date-t-hg">六</td></tr>'+V+"</table>";U=P+W;return U};Aa.find(".lasttomorrow_key").click(function(C){C.preventDefault();var D=new Date();D.setDate(D.getDate()-2);var E=D.getFullYear();var F=D.getMonth()+1;var G=D.getDate();A["data_begin"]["data-full"]=E+"/"+F+"/"+G;A["data_begin"]["data-year"]=E;A["data_begin"]["data-month"]=F;A["data_begin"]["data-day"]=G;A["data_end"]["data-full"]="";A["data_end"]["data-year"]="";A["data_end"]["data-month"]="";A["data_end"]["data-day"]="";m();Aj();Aq();Aa.find(".yes_btn").trigger("click")});Aa.find(".tomorrow_key").click(function(C){C.preventDefault();var D=new Date();D.setDate(D.getDate()-1);var E=D.getFullYear();var F=D.getMonth()+1;var G=D.getDate();A["data_begin"]["data-full"]=E+"/"+F+"/"+G;A["data_begin"]["data-year"]=E;A["data_begin"]["data-month"]=F;A["data_begin"]["data-day"]=G;A["data_end"]["data-full"]="";A["data_end"]["data-year"]="";A["data_end"]["data-month"]="";A["data_end"]["data-day"]="";m();Aj();Aq();Aa.find(".yes_btn").trigger("click")});Aa.find(".today_key").click(function(C){C.preventDefault();var D=Ao+1;A["data_begin"]["data-full"]=w+"/"+D+"/"+Ae;A["data_begin"]["data-year"]=w;A["data_begin"]["data-month"]=D;A["data_begin"]["data-day"]=Ae;A["data_end"]["data-full"]="";A["data_end"]["data-year"]="";A["data_end"]["data-month"]="";A["data_end"]["data-day"]="";m();Aj();Aq();Aa.find(".yes_btn").trigger("click")});Aa.find(".weekly_key").click(function(E){E.preventDefault();var J=Ao+1;var K=w+"/"+J+"/"+Ae;var L=new Date(K);var F=L.getDay();if(F==0){F=7}var P=L.getTime()-(F-1)*24*60*60*1000;var M=L.getTime()+(7-F)*24*60*60*1000;var O=new Date(P);var I=O.getFullYear();var N=O.getMonth()+1;var H=O.getDate();var Q=new Date(M);var G=Q.getFullYear();var C=Q.getMonth()+1;var D=Q.getDate();A["data_begin"]["data-full"]=I+"/"+N+"/"+H;A["data_begin"]["data-year"]=I;A["data_begin"]["data-month"]=N;A["data_begin"]["data-day"]=H;A["data_end"]["data-full"]=G+"/"+C+"/"+D;A["data_end"]["data-year"]=G;A["data_end"]["data-month"]=C;A["data_end"]["data-day"]=D;m();Aj();Aq();Aa.find(".yes_btn").trigger("click")});Aa.find(".monthly_key").click(function(D){D.preventDefault();var C=Ao+1;var E=t(w,C);A["data_begin"]["data-full"]=w+"/"+C+"/1";A["data_begin"]["data-year"]=w;A["data_begin"]["data-month"]=C;A["data_begin"]["data-day"]=1;A["data_end"]["data-full"]=w+"/"+C+"/"+E;A["data_end"]["data-year"]=w;A["data_end"]["data-month"]=C;A["data_end"]["data-day"]=E;m();Aj();Aq();Aa.find(".yes_btn").trigger("click")});var Aj=function(){Aa.find(".s_year_bx").each(function(){var E=B(this).data("clickbind");var C=B(this).parents(".ds-table2");var F=B(this).next();var D=B(this).parent();if(!E){B(this).click(function(G){G.stopPropagation();if(F.is(":visible")){F.hide();D.removeClass("se_year_down")}else{B(".po_select_list").hide();B(".se_year_down").removeClass("se_year_down");B(".se_month_down").removeClass("se_month_down");F.show();D.addClass("se_year_down")}if(C.size()){C.addClass("ds-table2-high")}else{B(".ds-table2").removeClass("ds-table2-high")}});B(this).data("clickbind","clickbind")}});Aa.find(".select_year .time_select_btn").each(function(){var C=B(this).data("clickbind");if(!C){B(this).click(function(D){D.stopPropagation();D.preventDefault();var E=parseInt(B(this).parents(".select_year").next().attr("date-month"));var F=parseInt(B(this).attr("date-time"));if(B(this).parents(".calendarWrap1").size()){x=F;p=E}else{Ai=F;v=E}m();Aj();Aq()});B(this).data("clickbind","clickbind")}});Aa.find(".s_month_bx").each(function(){var E=B(this).data("clickbind");var C=B(this).parents(".ds-table2");var F=B(this).next();var D=B(this).parent();if(!E){B(this).click(function(G){G.stopPropagation();if(F.is(":visible")){F.hide();D.removeClass("se_month_down")}else{B(".po_select_list").hide();B(".se_year_down").removeClass("se_year_down");B(".se_monthr_down").removeClass("se_month_down");F.show();D.addClass("se_month_down")}if(C.size()){C.addClass("ds-table2-high")}else{B(".ds-table2").removeClass("ds-table2-high")}})}});Aa.find(".select_month .time_select_btn").each(function(){var C=B(this).data("clickbind");if(!C){B(this).click(function(D){D.stopPropagation();D.preventDefault();var F=parseInt(B(this).parents(".select_month").prev().attr("date-year"));var E=parseInt(B(this).attr("date-time"));if(B(this).parents(".calendarWrap1").size()){x=F;p=E}else{Ai=F;v=E}m();Aj();Aq()});B(this).data("clickbind","clickbind")}})};var m=function(){var D=z(x,p);var C=z(Ai,v);if(Am=="onecolumn"){Aa.find(".calendarWrap2").html(C)}else{Aa.find(".calendarWrap1").html(D);Aa.find(".calendarWrap2").html(C)}};Aa.find(".yes_btn").click(function(C){C.stopPropagation();if(!A["data_begin"]["data-full"]){alert("请选择时间")}if(A["data_begin"]["data-full"]&&!A["data_end"]["data-full"]){k.val(A["data_begin"]["data-full"]);k.attr("data-begin",A["data_begin"]["data-full"]);k.attr("data-end",A["data_begin"]["data-full"]);if(typeof Ac=="function"){Ac(A["data_begin"]["data-full"],A["data_end"]["data-full"])}Aa.parents(".fc_screening_area").removeClass("fc_screening_area_cur");Aa.parents(".fc_screening_area").find(".fc_area_sub").hide()}else{if(A["data_begin"]["data-full"]&&A["data_end"]["data-full"]){k.val(A["data_begin"]["data-full"]+" 至 "+A["data_end"]["data-full"]);k.attr("data-begin",A["data_begin"]["data-full"]);k.attr("data-end",A["data_end"]["data-full"]);if(typeof Ac=="function"){Ac(A["data_begin"]["data-full"],A["data_end"]["data-full"])}Aa.parents(".fc_screening_area").removeClass("fc_screening_area_cur");Aa.parents(".fc_screening_area").find(".fc_area_sub").hide()}}});Aa.find(".cancel_btn").click(function(){Aa.parents(".fc_screening_area").removeClass("fc_screening_area_cur");Aa.parents(".fc_screening_area").find(".fc_area_sub").hide();if(Ar.isSingle){A["data_begin"]["data-full"]=Ar.begin.full;A["data_begin"]["data-year"]=Ar.begin.year;A["data_begin"]["data-month"]=Ar.begin.month;A["data_begin"]["data-day"]=Ar.begin.day;A["data_end"]["data-full"]=Ar.begin.full;A["data_end"]["data-year"]=Ar.begin.year;A["data_end"]["data-month"]=Ar.begin.month;A["data_end"]["data-day"]=Ar.begin.day}else{A["data_begin"]["data-full"]=Ar.begin.full;A["data_begin"]["data-year"]=Ar.begin.year;A["data_begin"]["data-month"]=Ar.begin.month;A["data_begin"]["data-day"]=Ar.begin.day;A["data_end"]["data-full"]=Ar.end.full;A["data_end"]["data-year"]=Ar.end.year;A["data_end"]["data-month"]=Ar.end.month;A["data_end"]["data-day"]=Ar.end.day}y();Aj();Aq()});var Al=this.repeat;var n=this.differ;var Aq=function(){Aa.find("td.ds-date-thismonth").click(function(C){C.stopPropagation();if(B(this).hasClass("date-grey")){}else{if(q=="onecolumn"){A["data_begin"]["data-full"]=B(this).attr("data-full");A["data_begin"]["data-year"]=B(this).attr("data-year");A["data_begin"]["data-month"]=B(this).attr("data-month");A["data_begin"]["data-day"]=B(this).attr("data-day")}else{if(!A["data_begin"]["data-full"]){A["data_begin"]["data-full"]=B(this).attr("data-full");A["data_begin"]["data-year"]=B(this).attr("data-year");A["data_begin"]["data-month"]=B(this).attr("data-month");A["data_begin"]["data-day"]=B(this).attr("data-day")}else{if(A["data_begin"]["data-full"]&&A["data_end"]["data-full"]){A["data_begin"]["data-full"]=B(this).attr("data-full");A["data_begin"]["data-year"]=B(this).attr("data-year");A["data_begin"]["data-month"]=B(this).attr("data-month");A["data_begin"]["data-day"]=B(this).attr("data-day");A["data_end"]["data-full"]="";A["data_end"]["data-year"]="";A["data_end"]["data-month"]="";A["data_end"]["data-day"]=""}else{if(A["data_begin"]["data-full"]){var D=B(this).attr("data-year");var E=B(this).attr("data-month");var F=B(this).attr("data-day");var G=A["data_begin"]["data-year"];var I=A["data_begin"]["data-month"];var H=A["data_begin"]["data-day"];if(B(this).attr("data-full")!=A["data_begin"]["data-full"]){Al=false;n=true;if(parseInt(D)==parseInt(G)&&parseInt(E)==parseInt(I)){if(parseInt(F)<parseInt(H)){A["data_end"]["data-full"]=A["data_begin"]["data-full"];A["data_end"]["data-year"]=A["data_begin"]["data-year"];A["data_end"]["data-month"]=A["data_begin"]["data-month"];A["data_end"]["data-day"]=A["data_begin"]["data-day"];A["data_begin"]["data-full"]=B(this).attr("data-full");A["data_begin"]["data-year"]=parseInt(B(this).attr("data-year"));A["data_begin"]["data-month"]=parseInt(B(this).attr("data-month"));A["data_begin"]["data-day"]=parseInt(B(this).attr("data-day"))}else{if(parseInt(F)>parseInt(H)){A["data_end"]["data-full"]=B(this).attr("data-full");A["data_end"]["data-year"]=parseInt(B(this).attr("data-year"));A["data_end"]["data-month"]=parseInt(B(this).attr("data-month"));A["data_end"]["data-day"]=parseInt(B(this).attr("data-day"))}}}else{if(parseInt(D)==parseInt(G)&&parseInt(E)!=parseInt(I)){if(parseInt(E)>parseInt(I)){A["data_end"]["data-full"]=B(this).attr("data-full");A["data_end"]["data-year"]=parseInt(B(this).attr("data-year"));A["data_end"]["data-month"]=parseInt(B(this).attr("data-month"));A["data_end"]["data-day"]=parseInt(B(this).attr("data-day"))}else{if(parseInt(E)<parseInt(I)){A["data_end"]["data-full"]=A["data_begin"]["data-full"];A["data_end"]["data-year"]=A["data_begin"]["data-year"];A["data_end"]["data-month"]=A["data_begin"]["data-month"];A["data_end"]["data-day"]=A["data_begin"]["data-day"];A["data_begin"]["data-full"]=B(this).attr("data-full");A["data_begin"]["data-year"]=parseInt(B(this).attr("data-year"));A["data_begin"]["data-month"]=parseInt(B(this).attr("data-month"));A["data_begin"]["data-day"]=parseInt(B(this).attr("data-day"))}}}else{if(parseInt(D)<parseInt(G)){A["data_end"]["data-full"]=A["data_begin"]["data-full"];A["data_end"]["data-year"]=A["data_begin"]["data-year"];A["data_end"]["data-month"]=A["data_begin"]["data-month"];A["data_end"]["data-day"]=A["data_begin"]["data-day"];A["data_begin"]["data-full"]=B(this).attr("data-full");A["data_begin"]["data-year"]=parseInt(B(this).attr("data-year"));A["data_begin"]["data-month"]=parseInt(B(this).attr("data-month"));A["data_begin"]["data-day"]=parseInt(B(this).attr("data-day"))}else{if(parseInt(D)>parseInt(G)){A["data_end"]["data-full"]=B(this).attr("data-full");A["data_end"]["data-year"]=parseInt(B(this).attr("data-year"));A["data_end"]["data-month"]=parseInt(B(this).attr("data-month"));A["data_end"]["data-day"]=parseInt(B(this).attr("data-day"))}}}}}else{Al=true}}}}}m();Aq();Aj();if(Al){A["data_end"]["data-full"]=null}else{if(!Al&&n){}}}})};function y(){l();m()}y();Aq();Aj()}};B.fn.xjfCalendar=function(A){if(typeof A==="string"){var D=Array.prototype.slice.call(arguments,1);this.each(function(){var C=B.data(this,"calendar");C[A].apply(C,D)});return true}else{return this.each(function(){var C=B.data(this,"calendar");if(!C){B.data(this,"calendar",new B.Calendar(A,this))}})}}})(jQuery);$.fn.ShowCalendar=function(H){var G=$(this);H=$.extend({"reg_year":1970,"reg_month":1,"reg_date":1,"callback":null,"column_style":null,"date_range_begin":{"year":0,"month":0,"day":0},"date_range_end":{"year":0,"month":0,"day":0},"ifrange_same":null},H);var F=[];$(this).each(function(){var A=$(this).next(".fc_area_sub").find(".calendar-box");A.xjfCalendar({"reg_year":H.reg_year,"reg_month":H.reg_month,"reg_date":H.reg_date,"target":G,callback:H.callback,"column_style":H.column_style,"date_range_begin":H.date_range_begin,"date_range_end":H.date_range_end,"ifrange_same":H.ifrange_same});F[0]=A});var E=$(this);$(this).siblings(".select").click(function(){var A=E.next(".calendar-box");A.show()});return F};